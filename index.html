<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker CoopAchat</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(251, 194, 235, 0.4);
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #f8a5c2;
        }

        .header h1 {
            color: #f8a5c2;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #fbc2eb 0%, #f8a5c2 100%);
            padding: 25px;
            border-radius: 15px;
            color: white;
            text-align: center;
            box-shadow: 0 5px 15px rgba(248, 165, 194, 0.4);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card .number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-card .label {
            font-size: 1em;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-add {
            background: linear-gradient(135deg, #f8a5c2 0%, #fbc2eb 100%);
            color: white;
        }

        .btn-add:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(248, 165, 194, 0.5);
        }

        .btn-remove {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
        }

        .btn-remove:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(238, 9, 121, 0.4);
        }

        .btn-reset {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            color: white;
        }

        .btn-reset:hover {
            transform: scale(1.05);
        }

        .progress-bar-container {
            background: #f0f0f0;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #fbc2eb 0%, #f8a5c2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .milestones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .milestone {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #ddd;
            transition: all 0.3s;
        }

        .milestone.reached {
            background: linear-gradient(135deg, #fbc2eb 0%, #f8a5c2 100%);
            color: white;
            border-left-color: #f8a5c2;
            transform: scale(1.05);
        }

        .milestone .percent {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .milestone .label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .priority-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .priority-card {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .priority-card.critical {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
        }

        .priority-card.important {
            background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
            color: #333;
        }

        .priority-card.normal {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }

        .priority-card .count {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .history {
            margin-top: 30px;
            padding: 20px;
            background: #fef5f9;
            border-radius: 10px;
            border: 2px solid #fbc2eb;
        }

        .history h3 {
            color: #f8a5c2;
            margin-bottom: 15px;
        }

        .history-item {
            padding: 10px;
            background: white;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(248, 165, 194, 0.2);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .stat-card .number {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Tracker CoopAchat</h1>
            <p>Suivez votre progression sur les 138 fonctionnalit√©s</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="number" id="completed">0</div>
                <div class="label">Termin√©es</div>
            </div>
            <div class="stat-card">
                <div class="number" id="remaining">138</div>
                <div class="label">Restantes</div>
            </div>
            <div class="stat-card">
                <div class="number" id="percentage">0%</div>
                <div class="label">Progression</div>
            </div>
            <div class="stat-card">
                <div class="number" id="days-left">--</div>
                <div class="label">Jours estim√©s</div>
            </div>
        </div>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar" style="width: 0%">
                0%
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-add" onclick="addProgress()">‚úÖ +1 Termin√©e</button>
            <button class="btn btn-add" onclick="addProgress(5)">‚ö° +5 Termin√©es</button>
            <button class="btn btn-remove" onclick="removeProgress()">‚ùå -1 Termin√©e</button>
            <button class="btn btn-reset" onclick="resetProgress()">üîÑ R√©initialiser</button>
        </div>

        <div class="milestones">
            <div class="milestone" data-percent="25">
                <div class="percent">25%</div>
                <div class="label">Premier quart</div>
            </div>
            <div class="milestone" data-percent="50">
                <div class="percent">50%</div>
                <div class="label">Mi-parcours</div>
            </div>
            <div class="milestone" data-percent="75">
                <div class="percent">75%</div>
                <div class="label">Derni√®re ligne droite</div>
            </div>
            <div class="milestone" data-percent="100">
                <div class="percent">100%</div>
                <div class="label">üéâ Termin√© !</div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="progressChart"></canvas>
        </div>

        <div class="priority-breakdown">
            <div class="priority-card critical">
                <div class="count">0/87</div>
                <div class="label">üî¥ Critique</div>
            </div>
            <div class="priority-card important">
                <div class="count">0/39</div>
                <div class="label">üü° Important</div>
            </div>
            <div class="priority-card normal">
                <div class="count">0/12</div>
                <div class="label">üü¢ Normal</div>
            </div>
        </div>

        <div class="history">
            <h3>üìú Historique des modifications</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        const TOTAL = 138;
        let completed = 0;
        let progressData = [0];
        let history = [];

        function loadData() {
            const saved = localStorage.getItem('coopachat_progress');
            if (saved) {
                const data = JSON.parse(saved);
                completed = data.completed || 0;
                progressData = data.progressData || [0];
                history = data.history || [];
                updateUI();
            }
        }

        function saveData() {
            localStorage.setItem('coopachat_progress', JSON.stringify({
                completed,
                progressData,
                history
            }));
        }

        const ctx = document.getElementById('progressChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: progressData.map((_, i) => i === 0 ? 'D√©but' : `√âtape ${i}`),
                datasets: [{
                    label: 'Fonctionnalit√©s termin√©es',
                    data: progressData,
                    borderColor: '#f8a5c2',
                    backgroundColor: 'rgba(248, 165, 194, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointBackgroundColor: '#f8a5c2',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    },
                    title: {
                        display: true,
                        text: '√âvolution de votre progression',
                        font: { size: 18 },
                        color: '#f8a5c2'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: TOTAL,
                        ticks: {
                            stepSize: 10
                        }
                    }
                }
            }
        });

        function addProgress(amount = 1) {
            if (completed + amount > TOTAL) {
                amount = TOTAL - completed;
            }
            
            completed += amount;
            progressData.push(completed);
            
            history.unshift({
                action: `+${amount} termin√©e(s)`,
                date: new Date().toLocaleString('fr-FR'),
                total: completed
            });
            
            if (history.length > 10) history.pop();
            
            updateUI();
            saveData();
            
            if (completed === TOTAL) {
                celebrate();
            }
        }

        function removeProgress() {
            if (completed > 0) {
                completed--;
                progressData.push(completed);
                
                history.unshift({
                    action: '-1 termin√©e',
                    date: new Date().toLocaleString('fr-FR'),
                    total: completed
                });
                
                if (history.length > 10) history.pop();
                
                updateUI();
                saveData();
            }
        }

        function resetProgress() {
            if (confirm('Voulez-vous vraiment r√©initialiser toute votre progression ?')) {
                completed = 0;
                progressData = [0];
                history = [];
                updateUI();
                saveData();
            }
        }

        function updateUI() {
            const percentage = Math.round((completed / TOTAL) * 100);
            
            document.getElementById('completed').textContent = completed;
            document.getElementById('remaining').textContent = TOTAL - completed;
            document.getElementById('percentage').textContent = percentage + '%';
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
            
            const remaining = TOTAL - completed;
            const hoursRemaining = remaining * 2;
            const daysRemaining = Math.ceil(hoursRemaining / 8);
            document.getElementById('days-left').textContent = daysRemaining;
            
            document.querySelectorAll('.milestone').forEach(milestone => {
                const percent = parseInt(milestone.dataset.percent);
                if (percentage >= percent) {
                    milestone.classList.add('reached');
                } else {
                    milestone.classList.remove('reached');
                }
            });
            
            chart.data.labels = progressData.map((_, i) => i === 0 ? 'D√©but' : `√âtape ${i}`);
            chart.data.datasets[0].data = progressData;
            chart.update();
            
            const historyList = document.getElementById('historyList');
            if (history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: #999;">Aucune modification pour le moment</p>';
            } else {
                historyList.innerHTML = history.map(item => `
                    <div class="history-item">
                        <span><strong>${item.action}</strong> - ${item.date}</span>
                        <span style="color: #f8a5c2; font-weight: bold;">${item.total}/${TOTAL}</span>
                    </div>
                `).join('');
            }
        }

        function celebrate() {
            const colors = ['#fbc2eb', '#f8a5c2', '#e0c3fc', '#ffd1dc'];
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.top = '-10px';
                confetti.style.borderRadius = '50%';
                confetti.style.zIndex = '9999';
                document.body.appendChild(confetti);
                
                const duration = Math.random() * 3 + 2;
                confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: duration * 1000,
                    easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
                }).onfinish = () => confetti.remove();
            }
            
            alert('üéâ F√©licitations ! Vous avez termin√© les 138 fonctionnalit√©s ! üéâ');
        }

        loadData();
    </script>
</body>
</html>